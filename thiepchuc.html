<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Tạo Thiệp Chúc Tết 2025</title>
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,shrink-to-fit=no"
    />
    <meta name="title" content="Tạo Thiệp Chúc Tết 2025" />
    <meta name="author" content="Le Van Thuan - Ngao Phong Van" />
    <meta name="description" content="Website Le Van Thuan - Ngao Phong Van" />
    <meta
      name="keywords"
      content="bnatlu tlu bna Thuy Loi University CLB Sách và Hành động Trường Đại học Thủy Lợi"
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://bnatlu.id.vn" />
    <meta property="og:title" content="Tạo Thiệp Chúc Tết 2025" />
    <meta
      property="og:description"
      content="Website Le Van Thuan - Ngao Phong Van"
    />
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:title" content="Tạo Thiệp Chúc Tết 2025" />
    <meta
      property="twitter:description"
      content="Website Le Van Thuan - Ngao Phong Van"
    />
    <link rel="apple-touch-icon" sizes="120x120" href="images/icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="images/icon.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="images/icon.png" />
    <link rel="manifest" href="../../assets/img/favicon/site.webmanifest" />
    <link rel="mask-icon" href="fonts/safari-pinned-tab.svg" color="#ffffff" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="theme-color" content="#ffffff" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.5.0-beta4/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <style>
      @font-face {
        font-family: "TenFont1";
        src: url("./fonts/Hoa Sen Typeface.ttf") format("truetype");
      }
      @font-face {
        font-family: "TenFont2";
        src: url("./fonts/TP Frauen Roman.ttf") format("truetype");
      }
      @font-face {
        font-family: "TenFont3";
        src: url("./fonts/TP Frauen Script.ttf") format("truetype");
      }
    </style>
  </head>
  <body class="bg-red-50">
    <header class="bg-red-600 text-white py-8">
      <div class="container mx-auto text-center px-4">
        <h1 class="text-4xl font-bold mb-4">Tạo Thiệp Chúc Tết 2025</h1>
        <p class="text-xl">Thiệp chúc Tết độc đáo và ý nghĩa</p>
      </div>
    </header>

    <main class="container mx-auto py-12 px-4">
      <div class="grid md:grid-cols-2 gap-8">
        <!-- Preview Card -->
        <div class="relative">
          <div
            id="card-preview"
            class="relative w-[353px] h-[530px] mx-auto shadow-xl rounded-lg overflow-hidden"
          >
            <img
              id="background"
              src="images/Tet (11).jpg   "
              alt="Background"
              class="w-full h-full object-cover"
            />
            <div
              class="absolute inset-0 flex flex-col items-center justify-center gap-4"
            >
              <div
                class="back bg-[#770100] p-8 w-[280px] min-h-[150px] rounded-lg flex items-center justify-center border-2 border-white/50"
              >
                <p
                  id="wish-text"
                  class="text-white text-center text-2xl"
                  style="
                    font-family: 'TenFont1', sans-serif;
                    line-height: 1.5;
                    font-weight: 700;
                  "
                >
                  Chúc Mừng Năm Mới
                </p>
              </div>
              <div class="bg-black/50 p-4 w-[280px] rounded-lg">
                <p id="wish-meaning" class="text-white/90 text-center text-sm">
                  Ý nghĩa: Lời chúc truyền thống ngày Tết
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Controls -->
        <div class="space-y-6">
          <!-- Background Control -->
          <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="text-lg font-semibold text-red-800 mb-4">Hình nền</h3>
            <button
              id="random-bg"
              class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"
            >
              Đổi hình nền
            </button>
          </div>

          <!-- Wish Text Control -->
          <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="text-lg font-semibold text-red-800 mb-4">Lời chúc</h3>
            <div class="space-y-4">
              <button
                id="random-wish"
                class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"
              >
                Đổi lời chúc
              </button>
              <div>
                <label class="block text-gray-700 mb-2"
                  >Hoặc nhập lời chúc của bạn:</label
                >
                <textarea
                  id="custom-wish"
                  rows="3"
                  class="w-full border rounded p-2"
                ></textarea>
              </div>
              <!-- Font size -->
              <div>
                <label class="block text-gray-700 mb-2">Kích thước chữ:</label>
                <input
                  type="range"
                  id="font-size"
                  min="16"
                  max="48"
                  value="24"
                  class="w-full"
                  oninput="updateFontSize(this.value)"
                />
              </div>

              <!-- Font family -->
              <div>
                <label class="block text-gray-700 mb-2">Font chữ:</label>
                <select
                  id="font-family"
                  class="w-full border rounded p-2"
                  onchange="updateFont(this.value)"
                >
                  <option value="TenFont1">Font 1</option>
                  <option value="TenFont2">Font 2</option>
                  <option value="TenFont3">Font 3</option>
                </select>
              </div>

              <!-- Toggle meaning -->
              <div class="flex items-center">
                <input
                  type="checkbox"
                  id="show-meaning"
                  checked
                  class="mr-2"
                  onchange="toggleMeaning(this.checked)"
                />
                <label class="text-gray-700">Hiển thị ý nghĩa</label>
              </div>
            </div>
          </div>

          <!-- Download & Share -->
          <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="text-lg font-semibold text-red-800 mb-4">
              Tải về & Chia sẻ
            </h3>
            <div class="space-y-4">
              <div class="flex gap-4">
                <button
                  id="download"
                  class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"
                >
                  Tải về
                </button>
                <button
                  id="share"
                  class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
                >
                  Chia sẻ
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      const backgrounds = [
        "Tet (1).jpg",
        "Tet (2).jpg",
        "Tet (3).jpg",
        "Tet (4).jpg",
        "Tet (5).jpg",
        "Tet (6).jpg",
        "Tet (7).jpg",
        "Tet (8).jpg",
        "Tet (9).jpg",
        "Tet (10).jpg",
        "Tet (11).jpg",
        "Tet (12).jpg",
        "Tet (13).jpg",
        "Tet (14).jpg",
        "Tet (15).jpg",
        "Tet (16).jpg",
        "Tet (17).jpg",
        "Tet (18).jpg",
        "Tet (19).jpg",
      ];

      const wishes = [
        {
          text: "Cung Chúc Tân Xuân Phước Thọ Khang Ninh",
          meaning:
            "Kính chúc năm mới an khang, phúc đức, sống lâu và mạnh khỏe.",
        },
        {
          text: "Vạn Sự Như Ý",
          meaning: "Chúc mọi việc đều được như ý muốn.",
        },
        {
          text: "An Khang Thịnh Vượng",
          meaning: "Chúc an lành, khỏe mạnh và làm ăn phát đạt, giàu có.",
        },
        {
          text: "Sức Khỏe Dồi Dào",
          meaning: "Chúc luôn có sức khỏe tốt, tràn đầy năng lượng.",
        },
        {
          text: "Tấn Tài Tấn Lộc",
          meaning: "Chúc tài lộc và may mắn ngày càng tăng tiến.",
        },
        {
          text: "Gia Đạo Bình An",
          meaning: "Chúc gia đình luôn hòa thuận, yên ấm và bình an.",
        },
        {
          text: "Năm Mới Bình An, Vạn Sự Cát Tường",
          meaning: "Chúc năm mới bình yên và mọi điều đều tốt lành, may mắn.",
        },
        {
          text: "Bách Niên Giai Lão",
          meaning: "Chúc sống lâu trăm tuổi (dành cho người lớn tuổi).",
        },
        {
          text: "Ngũ Phúc Lâm Môn",
          meaning:
            "Chúc năm phúc (Phúc, Lộc, Thọ, Khang, Ninh) đến với gia đình.",
        },
        {
          text: "Xuân Đến An Khang, Tết Về Thịnh Vượng",
          meaning:
            "Chúc mùa xuân đến mang lại an khang và Tết về mang lại sự thịnh vượng.",
        },
        {
          text: "Công Thành Danh Toại",
          meaning: "Chúc công việc thành công và danh tiếng được vang xa.",
        },
        {
          text: "Mã Đáo Thành Công",
          meaning:
            "Chúc mọi việc đến đều sẽ thành công (nhanh chóng và tốt đẹp).",
        },
        {
          text: "Phúc Lộc Đầy Nhà",
          meaning: "Chúc phúc đức và tài lộc đầy ắp trong nhà.",
        },
        {
          text: "Hoa Khai Phú Quý, Lộc Đến An Khang",
          meaning:
            "Chúc hoa nở mang lại sự giàu sang và lộc đến mang lại sự an khang.",
        },
        {
          text: "Đầu Xuân Năm Mới, An Khang Vạn Sự Lành",
          meaning: "Chúc đầu xuân năm mới luôn an khang và mọi sự đều tốt đẹp.",
        },
        {
          text: "Chúc Mừng Năm Mới Vạn Điều Như Ý, Triệu Sự An Khang",
          meaning:
            "Chúc mừng năm mới mọi điều được như ý, triệu sự được an khang.",
        },
        {
          text: "Tân Niên Khởi Sắc, Vạn Lộc Đơm Hoa",
          meaning: "Chúc năm mới khởi sắc, vạn lộc nảy nở như hoa.",
        },
        {
          text: "Xuân An Khang Đức Tài Vượng Tiến",
          meaning: "Chúc mùa xuân an khang, đức độ và tài lộc đều vượng tiến.",
        },
        {
          text: "Gia Đình Hạnh Phúc An Hòa, Vạn Sự Cát Tường Thành Công",
          meaning:
            "Chúc gia đình hạnh phúc, an hòa và mọi sự đều tốt lành, thành công.",
        },
        {
          text: "Chúc Xuân Như Ý, Đón Tết Phát Tài",
          meaning: "Chúc mùa xuân mọi việc được như ý, đón Tết đến tài lộc.",
        },
        {
          text: "Năm Mới Sum Vầy, An Yên Tự Tại",
          meaning: "Chúc năm mới gia đình sum vầy, tâm hồn an yên, tự tại.",
        },
        {
          text: "Chúc Tết Đến Trăm Điều May, Xuân Sang Vạn Sự Thành",
          meaning:
            "Chúc Tết đến mang trăm điều may mắn, mùa xuân sang vạn sự thành công.",
        },
        {
          text: "Đầu Năm Sức Khỏe Dồi Dào, Cả Năm An Lạc, Hạnh Phúc Tràn Đầy",
          meaning:
            "Chúc đầu năm sức khỏe dồi dào, cả năm an lạc và hạnh phúc tràn đầy.",
        },
        {
          text: "Chúc Bạn Năm Mới Đắc Lộc Đắc Tài, Vạn Sự Hanh Thông, An Khang Thịnh Vượng",
          meaning:
            "Chúc bạn năm mới đạt được nhiều lộc và tài, mọi việc hanh thông, an khang và thịnh vượng.",
        },
        {
          text: "Kính Chúc Tân Xuân Vô Ưu Vô Lo, An Nhiên Tự Tại, Sống Khỏe Sống Vui",
          meaning:
            "Kính chúc năm mới không ưu phiền lo lắng, an nhiên tự tại, sống khỏe mạnh và vui vẻ (dành cho người lớn tuổi).",
        },
        {
          text: "Chúc Năm Mới Tâm An Khang Thái, Vạn Sự Cát Lành, Như Ý Nguyện",
          meaning:
            "Chúc năm mới tâm hồn an yên, khỏe mạnh, mọi sự tốt lành và được như ý nguyện.",
        },
        {
          text: "Tân Xuân Phú Quý An Khang, Vạn Sự May Mắn Cát Tường",
          meaning:
            "Chúc năm mới phú quý, an khang, vạn sự may mắn và tốt lành.",
        },
        {
          text: "Chúc Mừng Năm Mới An Khang, Vạn Sự Như Mơ, Tỷ Điều Bất Ngờ",
          meaning:
            "Chúc mừng năm mới an khang, mọi sự như mơ và có tỷ điều bất ngờ thú vị.",
        },
        {
          text: "Xuân Mới Rộn Ràng, Cả Nhà Bình An, Vạn Sự Như Ý, Tỷ Sự Cát Tường",
          meaning:
            "Chúc mùa xuân mới rộn ràng, cả nhà bình an, vạn sự như ý và tỷ sự tốt lành.",
        },
        {
          text: "Chúc Tết Đoàn Viên, Cả Nhà Sum Họp, An Khang Hạnh Phúc, Vạn Lộc Đến Nhà",
          meaning:
            "Chúc Tết đoàn viên, cả nhà sum họp, an khang hạnh phúc và vạn lộc đến nhà.",
        },

        {
          text: "Chúc Mừng Năm Mới Phú Quý Cát Tường, An Khang Thịnh Vượng Vạn Sự Như Ý",
          meaning:
            "Lời chúc toàn diện về phú quý, may mắn, an khang, thịnh vượng và mọi việc như ý.",
        },
        {
          text: "Tân Xuân Rực Rỡ, Vạn Sự Khởi Sắc, Cát Tinh Chiếu Mệnh",
          meaning:
            "Chúc năm mới rực rỡ, mọi sự khởi đầu tốt đẹp và sao tốt chiếu mệnh.",
        },
        {
          text: "Xuân Về Muôn Hoa Nở Rộ, Tết Đến Tràn Ngập Niềm Vui, Gia Đình Hạnh Phúc",
          meaning:
            "Chúc mùa xuân về muôn hoa nở rộ, Tết đến tràn ngập niềm vui và gia đình luôn hạnh phúc.",
        },
        {
          text: "Chúc Năm Mới Tâm Thanh Tịnh, Vạn Sự An Nhiên, Cuộc Sống Viên Mãn",
          meaning:
            "Chúc năm mới tâm hồn thanh tịnh, mọi sự an nhiên và cuộc sống viên mãn (tập trung vào sự bình yên nội tâm).",
        },
        {
          text: "Kính Chúc Tân Xuân Thân Cung Khang Kiện, Tuế Nguyệt Trường Xuân, Phúc Như Đông Hải",
          meaning:
            "Kính chúc năm mới thân thể khỏe mạnh, tuổi thọ kéo dài như mùa xuân và phúc đức như biển Đông (dành cho người lớn tuổi, rất trang trọng).",
        },
        {
          text: "Chúc Xuân Đắc Lộc Đắc Tài, Gia Hòa Vạn Sự Hưng",
          meaning:
            "Chúc mùa xuân đạt được nhiều lộc và tài, gia đình hòa thuận thì vạn sự hưng thịnh.",
        },
        {
          text: "Năm Mới Hỷ Khí Nghênh Xuân, Vạn Phúc Lai Gia, An Khang Toàn Gia",
          meaning:
            "Chúc năm mới tràn ngập hỷ khí đón xuân, vạn phúc đến nhà và cả gia đình an khang.",
        },
        {
          text: "Chúc Bạn Xuân Mới Đắc Ý, Vạn Sự Thành Công, Tình Duyên Mỹ Mãn",
          meaning:
            "Chúc bạn mùa xuân mới đắc ý trong mọi việc, vạn sự thành công và tình duyên mỹ mãn (thêm lời chúc về tình duyên).",
        },
        {
          text: "Tân Niên Như Ý Cát Tường, Xuân Đến Phú Quý Vinh Quang",
          meaning:
            "Chúc năm mới như ý và tốt lành, xuân đến mang lại phú quý và vinh quang.",
        },
        {
          text: "Chúc Mừng Năm Mới An Khang, Tài Lộc Đến Nhà, Công Danh Rạng Rỡ",
          meaning:
            "Chúc mừng năm mới an khang, tài lộc đến nhà và công danh được rạng rỡ.",
        },
        {
          text: "Xuân Mới An Lành Khởi Sắc, Gia Đình Hạnh Phúc Thắm Tình",
          meaning:
            "Chúc mùa xuân mới an lành và khởi sắc, gia đình hạnh phúc và tình cảm thêm thắm thiết.",
        },
        {
          text: "Chúc Tết Đến Nhà Vạn Điều May, Xuân Sang An Lạc Trọn Năm Dài",
          meaning:
            "Chúc Tết đến nhà mang vạn điều may mắn, mùa xuân sang an lạc trọn cả năm dài.",
        },
        {
          text: "Kính Chúc Ông Bà/Cha Mẹ Trường Thọ Vô Cương, Gia Đình Hạnh Phúc Ngập Tràn Yêu Thương",
          meaning:
            "Kính chúc ông bà/cha mẹ sống lâu vô hạn, gia đình hạnh phúc tràn ngập yêu thương (lời chúc đặc biệt dành cho bậc sinh thành).",
        },
        {
          text: "Chúc Năm Mới Tâm An Vạn Sự An, Thân Khỏe Bách Bệnh Tan",
          meaning:
            "Chúc năm mới tâm hồn an yên thì vạn sự đều an, thân thể khỏe mạnh thì trăm bệnh tiêu tan.",
        },
        {
          text: "Xuân An Khang Vạn Lộc Tới, Tết Thịnh Vượng Phú Quý Lai",
          meaning:
            "Chúc mùa xuân an khang và vạn lộc tới, Tết thịnh vượng và phú quý đến.",
        },
      ];

      function randomBackground() {
        const bg = backgrounds[Math.floor(Math.random() * backgrounds.length)];
        document.getElementById("background").src = `./images/${bg}`;
      }

      function randomWish() {
        const wish = wishes[Math.floor(Math.random() * wishes.length)];
        document.getElementById("wish-text").textContent = wish.text;
        document.getElementById(
          "wish-meaning"
        ).textContent = `Ý nghĩa: ${wish.meaning}`;
      }

      document.getElementById("custom-wish").addEventListener("input", (e) => {
        document.getElementById("wish-text").textContent = e.target.value;
        document.getElementById("wish-meaning").textContent =
          "Ý nghĩa: Lời chúc từ tấm lòng của bạn";
      });

      function downloadCard() {
        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");
        canvas.width = 853;
        canvas.height = 1280;
        const scale = 2.42;

        const img = new Image();
        img.crossOrigin = "Anonymous";
        img.onload = () => {
          ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

          const textBox = document.querySelector(".back");
          const wishText = document.getElementById("wish-text");
          const boxStyle = getComputedStyle(textBox);
          const textStyle = getComputedStyle(wishText);

          const boxWidth = parseInt(boxStyle.width) * scale;
          const boxHeight = parseInt(boxStyle.height) * scale;
          const boxX = (canvas.width - boxWidth) / 2;
          const boxY = (canvas.height - boxHeight) / 2;

          ctx.fillStyle = "#770100";
          ctx.fillRect(boxX, boxY, boxWidth, boxHeight);
          ctx.strokeStyle = "rgba(255, 255, 255, 0.5)";
          ctx.lineWidth = 2;
          ctx.strokeRect(boxX, boxY, boxWidth, boxHeight);

          const fontSize = parseInt(textStyle.fontSize) * scale;
          const lineHeight = parseFloat(textStyle.lineHeight) * fontSize;
          ctx.font = `700 ${fontSize}px ${wishText.style.fontFamily}`;
          ctx.fillStyle = "white";
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";

          drawWrappedText(
            ctx,
            wishText.textContent,
            boxX,
            boxY,
            boxWidth,
            boxHeight,
            fontSize,
            wishText.style.fontFamily
          );

          const link = document.createElement("a");
          link.download = `ChucTetAtTy_NgaoPhongVan.png`;
          link.href = canvas.toDataURL("image/png", 1.0);
          link.click();
        };
        img.src = document.getElementById("background").src;
      }

      function drawWrappedText(
        ctx,
        text,
        boxX,
        boxY,
        boxWidth,
        boxHeight,
        fontSize,
        fontFamily
      ) {
        ctx.font = `700 ${fontSize}px ${fontFamily}`;
        ctx.fillStyle = "white";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";

        const words = text.split(" ");
        const lines = [];
        let currentLine = words[0];

        for (let i = 1; i < words.length; i++) {
          const word = words[i];
          const width = ctx.measureText(currentLine + " " + word).width;

          if (width < boxWidth - 150) {
            currentLine += " " + word;
          } else {
            lines.push(currentLine);
            currentLine = word;
          }
        }
        lines.push(currentLine);

        const lineHeight = fontSize * 1.5;
        const totalHeight = lines.length * lineHeight;
        const startY = boxY + (boxHeight - totalHeight) / 2;

        lines.forEach((line, i) => {
          const y = startY + i * lineHeight + lineHeight / 2;
          ctx.fillText(line, boxX + boxWidth / 2, y);
        });
      }

      function getTextLines(ctx, text, maxWidth) {
        const chars = [...text];
        const lines = [];
        let currentLine = chars[0];

        for (let i = 1; i < chars.length; i++) {
          const char = chars[i];
          const width = ctx.measureText(currentLine + char).width;
          if (width < maxWidth) {
            currentLine += char;
          } else {
            lines.push(currentLine);
            currentLine = char;
          }
        }
        lines.push(currentLine);
        return lines;
      }

      function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
        const words = text.split(" ");
        let line = "";

        for (let n = 0; n < words.length; n++) {
          const testLine = line + words[n] + " ";
          const metrics = ctx.measureText(testLine);
          const testWidth = metrics.width;

          if (testWidth > maxWidth && n > 0) {
            ctx.fillText(line, x, y);
            line = words[n] + " ";
            y += lineHeight;
          } else {
            line = testLine;
          }
        }
        ctx.fillText(line, x, y);
      }

      function shareCard() {
        if (navigator.share) {
          html2canvas(document.getElementById("card-preview")).then(
            (canvas) => {
              canvas.toBlob((blob) => {
                const file = new File([blob], "thiep-tet.png", {
                  type: "image/png",
                });
                navigator.share({
                  files: [file],
                  title: "Thiệp chúc Tết",
                  text: "Chúc mừng năm mới!",
                });
              });
            }
          );
        }
      }

      function updateFontSize(size) {
        document.getElementById("wish-text").style.fontSize = `${size}px`;
      }

      function updateFont(fontFamily) {
        document.getElementById(
          "wish-text"
        ).style.fontFamily = `'${fontFamily}', sans-serif`;
      }

      function toggleMeaning(show) {
        document.getElementById("wish-meaning").parentElement.style.display =
          show ? "block" : "none";
      }

      document
        .getElementById("random-bg")
        .addEventListener("click", randomBackground);
      document
        .getElementById("random-wish")
        .addEventListener("click", randomWish);
      document.getElementById("custom-wish").addEventListener("input", (e) => {
        document.getElementById("wish-text").textContent = e.target.value;
      });
      document
        .getElementById("download")
        .addEventListener("click", downloadCard);
      document.getElementById("share").addEventListener("click", shareCard);
    </script>
  </body>
</html>
